<!--
  - Copyright (c) 2023. Selldone® Business OS™
  -
  - Author: M.Pajuhaan
  - Web: https://selldone.com
  - ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  -
  - All rights reserved. In the weave of time, where traditions and innovations intermingle, this content was crafted.
  - From the essence of thought, through the corridors of creativity, each word, and sentiment has been molded.
  - Not just to exist, but to inspire. Like an artist's stroke or a sculptor's chisel, every nuance is deliberate.
  - Our journey is not just about reaching a destination, but about creating a masterpiece.
  - Tread carefully, for you're treading on dreams.
  -->

<template>
  <div class="d-inline-flex align-center">
    <component
      :is="logo_custom_size ? 'router-link' : 'v-btn'"
      icon
      class="mx-1 zoomIn"
      :to="
        viewOnly
          ? {}
          : {
              name:
                getCustomHomePage() && !in_custom_home_page
                  ? getCustomHomePage()
                  : 'ShopPage',
            }
      "
    >
      <img
        v-if="logo_custom_size"
        :src="logo"
        :height="theme.logo_h"
        :width="theme.logo_w"
        style="object-fit: contain"
      />
      <v-avatar
        v-else
        class="pointer-pointer hover-scale-small force-top"
        :size="in_custom_home_page ? 26 : 36"
        color="transparent"
        :tile="in_custom_home_page"
      >
        <v-img
          :src="
            in_custom_home_page
              ? is_light_header
                ? require('@/Components/assets/icons/basket.svg')
                : require('@/Components/assets/icons/basket-w.svg')
              : logo
          "
          alt="Shop"
          style="transition: none"
        />
      </v-avatar>
    </component>

    <template v-if="shop && $vuetify.breakpoint.smAndUp">
      <span
        v-if="isMobile"
        class="z2 ms-2 font-weight-bold zoomIn d-block single-line"
        style="font-size: 22px"
        @click="goToShopInfoPage()"
      >
        {{ title }}
      </span>
      <router-link
        v-else
        class="z2 ms-2 font-weight-bold zoomIn"
        style="font-size: 22px; color: currentColor"
        :to="
          viewOnly
            ? {}
            : {
                name:
                  getCustomHomePage() && !in_custom_home_page
                    ? getCustomHomePage()
                    : 'ShopPage',
              }
        "
      >
        {{ title }}
      </router-link>
    </template>
  </div>
</template>

<script>
export default {
  name: "SShopMainHeaderLogo",
  components: {},
  props: {
    shop: { required: true },
    viewOnly: { default: false, type: Boolean },
  },
  data: () => ({}),

  computed: {
    theme() {
      if (!this.shop) return null;
      return this.shop.theme;
    },

    // --------------------------------------------------------------------------------

    is_light_header() {
      return (
        this.$route.matched.some((record) => record.meta.light_header) ||
        (this.theme && this.theme.light_header)
      );
    },

    // --------------------------------------------------------------------------------

    logo() {
      if (this.theme && this.theme.logo)
        return this.getShopImagePath(this.theme.logo);

      return this.getShopImagePath(this.shop.icon, 128);
    },
    logo_custom_size() {
      return (
        this.theme &&
        this.logo &&
        ((this.theme.logo_w && this.theme.logo_w !== "unset") ||
          (this.theme.logo_h && this.theme.logo_h !== "unset"))
      );
    },

    title() {
      return this.theme &&
        this.theme.title !== null &&
        this.theme.title !== undefined
        ? this.theme.title
        : this.shop.title;
    },

    in_custom_home_page() {
      if (this.viewOnly) return true;
      return this.$route.name === this.getCustomHomePage();
    },
  },

  watch: {},

  created() {},

  mounted() {},

  methods: {
    goToShopInfoPage() {
      if (this.$route.name === "ShopInfoPageMobile")
        this.$router.push({ name: "ShopPage" });
      else this.$router.push({ name: "ShopInfoPageMobile" });
    },
  },
};
</script>

<style lang="scss" scoped>
/*
━━━━━━━━━━━━━━━━━━━━ 🎺 Variables ━━━━━━━━━━━━━━━━━━━━
 */
.s--shop-main-header-logo {

}

/*
━━━━━━━━━━━━━━━━━━━━ 🪅 Classes ━━━━━━━━━━━━━━━━━━━━
 */

.s--shop-main-header-logo {

}
</style>